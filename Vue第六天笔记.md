## 生命周期【多敲，多了解】

-------------------------

# 今日目标

## 商品详情组件
	步骤：
		1、创建goodsinfo.vue
		2、在main.js中，导入并且设置路由规则
		3、在goodslist.vue，通过声明式导航，触发路由
		
	完成商品详情数据的展示
		1、根据id获取数据
			
		2、渲染数据

### 抽取轮播子组件
	思路分析:
		1、创建subswipe.vue
		2、集成到goodsinfo.vue中来
		3、goodsinfo.vue(父组件)传值给subswipe(子组件)
			把url传递给子组件
			
			接收方:(subswipe) 
				props:
			
			传值方:
			
	步骤:
		1、完成商品详情中轮播子组件的功能
		2、改造home.vue中轮播的功能
		
	注意:
		1、组件要有共同点
		2、尽可能把业务逻辑放在子组件中去,父组件只需要集成子组件，并且给他传递必要的参数就OK

### 回顾编程式导航，完成图文介绍和商品评论功能
	$router

	步骤：
		1、使用编程式导航，跳转到图文介绍组件中去，并且要带上商品id
			1.1、创建pictureAndText.vue
			1.2、设置路由规则
			1.3、使用编程式导航，跳转
			1.4、根据商品id、发送网络请求，获取数据、渲染


		2、使用编程式导航，跳转到商品评论组件里面去，并且要带上商品id
			2.1、创建goodscomment.vue
			2.2、设置路由规则
			2.3、使用编程式导航，跳转
			2.4、集成评论子组件

### 子组件(subnumber.vue)传值给父组件(goodsinfo.vue)
	原理:通过自定义事件传递值

	步骤:
		1、创建subnumber.vue
		2、在父组件中集成subnumber.vue
		3、子组件当它内部数据变化之后，传递给父组件
		
	子组件传值给父组件
		接收方:(父组件)
			在使用子组件的地方，使用v-on监听事件，写好事件处理函数，并且这个函数是写在父组件的methods中的
		
		发送方:(子组件)
			使用this.$emit('自定义事件名称',值) 触发
			
	注意点:
		1、自定义事件千万不要和系统的，比如click、mouseover等冲突
		2、我们父组件中监听自定义事件的时候，写处理函数的时候，只需要写函数名称即可，千万不要加`()`调用

### 非父子关系组件传值
	原理:通过自定义事件传递值

	达到的目的：
		当我们点击了goodsinfo.vue加入购物车按钮，把值传递到App.vue组件中去，并且更新徽标的值
		
	步骤:
		1、先在App.vue的TabBar购物车那一个标签中，写一个徽标的span(默认值0)
		
		2、从goodsinfo.vue中把商品的数量值，传递到App.vue【重点】
			2.1、创建一个公共的Vue对象(bus)
			2.2、在发送方(goodsinfo.vue)，通过bus.$emit('自定义事件名称',值)
			2.3、在接收方(App.vue)中，通过bus.$on('自定义事件名称',处理函数)
		
		3、App.vue根据接收到的值，更新徽标上面的数组，如果是0隐藏，非0就显示
			遇到了一个问题，就是在处理函数中，通过this想更改badge，但是失败了，原因是里面this,现在代表的是bus对象
			解决方式，见代码

-------------------------

## 总结
	params & query
	相同点:
		通过params和query都能传值
		
	不同点:
		传值的方式不一样
			params  xxx/yyy/值
			query   xxx/yyy?key=value
			
		在跳转过来的组件中，接收值也不一样
			params  $route.params.路由规则中设置的参数名称
			query   $route.query.key

## 总结子组件传值给父组件 & 非父子组件传值
	相同点:
		1、内部都是通过自定义事件来完成的
		2、自定义事件名称不能和系统事件名称冲突
		
	不同点:
		子组件传值给父组件 直接使用this即可
		非父子组件，必须要通过公共的Vue对象传递
	
	子(subnumber.vue) ---> 父(goodsinfo.vue)
		发送方(subnumber.vue)
			this.$emit('自定义事件名称',参数)
			
		接收方(goodsinfo.vue)
			1、父组件的template中，使用子组件的使用，利用v-on:自定义事件名称 = "处理函数名称"
			2、在父组件的methods中，定义好处理函数，如果要接收值，还得写好形参
	
	非父子（goosinfo.vue ---> App.vue）
		1、创建一个公共的Vue对象(bus)
		
		2、发送方(goosinfo.vue)
			bus.$emit('自定义事件名称',参数)
			
		3、接收方(App.vue)
			在App.vue中写注册代码
			bus.$on('自定义事件名称',处理函数)
			如果需要接收值，靠参数


## 几点容易混淆的地方
	1、在组件的template里面可以写this,也可以不写
	2、在组件的script里面，必须要写
	3、props是写在子组件